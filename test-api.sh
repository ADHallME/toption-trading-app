#!/bin/bash

echo "ðŸ§ª TESTING TOPTION APIs"
echo "======================"
echo ""

echo "1ï¸âƒ£ Testing Market Scan Endpoint..."
echo "curl 'https://www.toptiontrade.com/api/market-scan?market=equity&batch=3'"
echo ""
curl -s "https://www.toptiontrade.com/api/market-scan?market=equity&batch=3" | python3 -m json.tool 2>/dev/null || curl -s "https://www.toptiontrade.com/api/market-scan?market=equity&batch=3"
echo ""
echo ""

echo "2ï¸âƒ£ Testing Opportunities Endpoint..."
echo "curl 'https://www.toptiontrade.com/api/opportunities-fast?marketType=equity'"
echo ""
curl -s "https://www.toptiontrade.com/api/opportunities-fast?marketType=equity" | python3 -m json.tool 2>/dev/null || curl -s "https://www.toptiontrade.com/api/opportunities-fast?marketType=equity"
echo ""
echo ""

echo "3ï¸âƒ£ Testing Opportunities (Standard)..."
echo "curl 'https://www.toptiontrade.com/api/opportunities?marketType=equity'"
echo ""
curl -s "https://www.toptiontrade.com/api/opportunities?marketType=equity" | python3 -m json.tool 2>/dev/null || curl -s "https://www.toptiontrade.com/api/opportunities?marketType=equity"
echo ""
echo ""

echo "======================"
echo "âœ… Test Complete!"
echo ""
echo "Look for:"
echo "  âœ… \"success\": true"
echo "  âœ… \"opportunities\": [...]"
echo "  âœ… \"scanning\": false"
echo ""
echo "If scanning=true, wait 2 minutes and run this again."
echo "======================"
